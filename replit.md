# Mon Auxiliaire Déménagement System

## Overview

This is a full-stack web application for a moving company to manage clients, services, employees, and billing. The system allows for scheduling and tracking moving services, managing customer information, handling employee assignments, vehicle management, generating reports, and billing.

The application is built with a modern tech stack using React, Express.js, and PostgreSQL with Drizzle ORM. It follows a client-server architecture with RESTful API endpoints and a clean, responsive UI using the shadcn/ui component library.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

The system follows a monolithic architecture with clear separation between frontend and backend:

1. **Frontend**: React single-page application (SPA) using TypeScript, deployed as static assets
2. **Backend**: Express.js server handling API requests with database access through Drizzle ORM
3. **Database**: PostgreSQL database for storing application data
4. **Authentication**: JWT-based authentication system

The application is structured as follows:
- `client/`: Contains the React frontend application
- `server/`: Contains the Express.js backend API
- `shared/`: Contains shared code and data models used by both frontend and backend
- `migrations/`: Database migration files generated by Drizzle

## Key Components

### Frontend

1. **UI Framework**: Uses shadcn/ui component library with Tailwind CSS for styling
2. **State Management**: Uses React Context for authentication and theme management, and TanStack Query for data fetching and caching
3. **Routing**: Uses Wouter for client-side routing
4. **Calendar Integration**: Uses FullCalendar for scheduling interface
5. **Charts**: Uses Recharts for data visualization

### Backend

1. **API Server**: Express.js server with RESTful endpoints
2. **Database Access**: Drizzle ORM for type-safe database operations
3. **Authentication**: JWT-based with bcrypt for password hashing
4. **Storage Interface**: Abstract storage layer for database operations

### Database Schema

The database contains the following main entities:
1. **Users**: Application users with authentication credentials
2. **Sites**: Client locations/information
3. **Prestations**: Moving services/jobs scheduled or completed
4. **Employes**: Employee information
5. **Affectations**: Assignment of employees to services
6. **Vehicules**: Company vehicle information
7. **Factures**: Billing information

## Data Flow

1. **Authentication Flow**:
   - User submits login credentials
   - Server validates credentials and issues JWT token
   - Client stores token in localStorage
   - Token is included in subsequent API requests

2. **Data Retrieval Flow**:
   - React components use TanStack Query hooks to fetch data
   - Requests are sent to the Express backend
   - Backend validates JWT and retrieves data from database
   - Data is returned to frontend and cached

3. **Data Mutation Flow**:
   - Forms collect user input
   - Form data is validated using Zod
   - Data is sent to the API with the authentication token
   - Server validates and persists changes to the database
   - Frontend cache is invalidated/updated

## External Dependencies

### Frontend Dependencies
- React ecosystem (react, react-dom)
- TanStack Query for data fetching
- Wouter for routing
- shadcn/ui (based on Radix UI) for UI components
- Tailwind CSS for styling
- FullCalendar for calendar views
- Recharts for data visualization
- date-fns for date manipulation
- Zod and React Hook Form for form handling

### Backend Dependencies
- Express.js for API server
- Drizzle ORM for database operations
- bcrypt for password hashing
- JWT for authentication
- @neondatabase/serverless for database connection (could be swapped with PostgreSQL)

## Deployment Strategy

The application is configured for deployment on Replit with:

1. **Build Process**:
   - `npm run build` compiles the frontend and backend
   - Frontend is built with Vite
   - Backend is bundled with esbuild

2. **Runtime Configuration**:
   - Production runs with `NODE_ENV=production`
   - Database connection is configured via environment variables
   - API server serves the static frontend assets

3. **Scalability**:
   - The application uses the `autoscale` deployment target in Replit
   - Static assets are cached and served efficiently

4. **Database**:
   - Requires a PostgreSQL database
   - Connection string is provided via `DATABASE_URL` environment variable
   - Migrations are handled via Drizzle

## Development Workflow

1. Run `npm run dev` for local development with hot reloading
2. Use `npm run db:push` to push schema changes to the database
3. Build with `npm run build` for production deployment
4. Type checking with `npm run check`

## Next Steps

1. **Database Setup**: Configure PostgreSQL or compatible database provider
2. **Environment Variables**: Set up JWT_SECRET and DATABASE_URL
3. **User Creation**: Implement initial admin user creation
4. **Testing**: Implement comprehensive testing strategy
5. **Documentation**: Add API documentation and user guides